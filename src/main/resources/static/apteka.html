<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Статьи</title>
    <link rel="stylesheet" href="css/apteka.css">
    <link rel="icon" href="img/zoovet3.png">
</head>

<body>
    <div class="top">
        <div class="top_context">
            <div class="top_menu">
                <a href="index.html" class="logo_container">
                    <img src="img/ZOOVET_KONSALTING2.png" class="logo_img" alt="">
                </a>
                <div class="menu_button_container">
                    <a href="procedure.html" class="menu_button">УСЛУГИ</a>
                    <a href="article.html" class="menu_button">СТАТЬИ</a>
                    <a href="apteka.html" class="menu_button">АПТЕКА</a>
                    <a href="" class="menu_button">КОНТАКТЫ</a>
                </div>
            </div>
        </div>
    </div>

    <div class="middle">
        <div class="middle_context">
            <div class="main_description_head">
                Вет-аптека
            </div>
            <div class="category_menu" id="category_menu"></div>
            <!-- контейнер только для товаров -->
            <div class="categories_container" id="categories_container"></div>
        </div>
    </div>

    <div class="bottom">
        <div class="bottom_context">
            <div class="bottom_block">
                <img src="img/ZOOVET_KONSALTING2.png" class="logo_bottom_img" alt="">
            </div>
            <div class="bottom_block">
                <h3>Адрес</h3>
                <p>
                    Улица Тауелсыздык, 76 <br>
                    Тобыл, Костанайская область
                </p>
            </div>
            <div class="bottom_block">
                <h3>График работы</h3>
                <h1>Ежедневно с 09:00 до 22:00</h1>
                <h1>Обед c 13:00 до 14:00</h1>
            </div>
            <div class="bottom_block">
                <h3>Контакты</h3>
                <h1>Whatsapp</h1>
                <p>+77052125345</p>
                <p>+77052125345</p>
                <h1>Telegram</h1>
                <p>@zoovet</p>
                <h1>Instagram</h1>
                <p>@vetklinikakost</p>
            </div>
        </div>
    </div>

    <script>
        async function loadPage() {
            const res = await fetch('/api/v1/apteka');
            const categories = await res.json();

            // меню сверху
            const menu = document.getElementById('category_menu');
            menu.innerHTML = '';
            categories.forEach(category => {
                const link = document.createElement('a');
                link.classList.add('category_button');
                link.href = `#${category.name}`;
                link.textContent = category.name;
                menu.appendChild(link);
            });

            // товары по категориям
            const container = document.getElementById('categories_container');
            container.innerHTML = '';

            categories.forEach(category => {
                const categoryBlock = document.createElement('div');
                categoryBlock.classList.add('category-block');
                categoryBlock.innerHTML = `
                    <div class="categories_text" id="${category.name}">${category.name}</div>
                    <div class="apteka_grid">
                        ${category.products.map(product => `
                            <div class="apteka_card">
                                <img class="apteka_img" src="${product.image_path}" alt="">
                                <h3>${product.name}</h3>
                                <p>${product.description}</p>
                                <h1>${product.price} тг</h1>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(categoryBlock);
            });
        }

        document.addEventListener('DOMContentLoaded', loadPage);
    </script>
</body>

</html>